{
  "containerDefinitions": [
    {
        "environment": [],
        "name": "cloudwatchlogs",
        "image": "schmutze/cloudwatchlogs",
        "cpu": 50,
        "portMappings": [
            {
                "containerPort": 514
            }
        ],
        "memory": 64,
        "essential": true
    },
    {
        "environment": [],
        "name": "httpd",
        "links": [
            "cloudwatchlogs"
        ],
        "image": "httpd",
        "cpu": 50,
        "portMappings": [
            {
                "containerPort": 80,
                "hostPort": 80
                }
            ],
        "memory": 128,
        "entryPoint": ["/bin/bash", "-c"],
        "command": ["apt-get update && apt-get -y install wget && echo 'CustomLog \"| /usr/bin/logger -t apache2 -n cloudwatchlogs -P 514\" \"%v %h %l %u %t %r %>s %b %{Referer}i %{User-agent}i\"' >> /usr/local/apache2/conf/httpd.conf && echo ServerName `hostname` >> /usr/local/apache2/conf/httpd.conf && /usr/local/bin/httpd-foreground"],
        "essential": true
    }
  ],
  "family": "cloudwatchlogs"
}
